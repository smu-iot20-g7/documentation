<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How to use Tablevision | CS462: G7 IoT Documentation</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="Documentation for our RFID and Tablevision IoT Solution for Beo Crescent">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/assets/css/0.styles.64f42e8e.css" as="style"><link rel="preload" href="/assets/js/app.f1897de2.js" as="script"><link rel="preload" href="/assets/js/2.442eaabe.js" as="script"><link rel="preload" href="/assets/js/10.b2fb73e1.js" as="script"><link rel="prefetch" href="/assets/js/11.fe040afc.js"><link rel="prefetch" href="/assets/js/12.3e1b7095.js"><link rel="prefetch" href="/assets/js/13.612089b4.js"><link rel="prefetch" href="/assets/js/3.bfaf1cd1.js"><link rel="prefetch" href="/assets/js/4.5d0f0f89.js"><link rel="prefetch" href="/assets/js/5.ebce86c5.js"><link rel="prefetch" href="/assets/js/6.4ec631e2.js"><link rel="prefetch" href="/assets/js/7.8218e44e.js"><link rel="prefetch" href="/assets/js/8.4349f59a.js"><link rel="prefetch" href="/assets/js/9.8d51dd73.js">
    <link rel="stylesheet" href="/assets/css/0.styles.64f42e8e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">CS462: G7 IoT Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/journal/" class="nav-link">
  Journal
</a></div><div class="nav-item"><a href="/tray-inout/" class="nav-link">
  Tray In/Out Docs
</a></div><div class="nav-item"><a href="/tablevision/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Tablevision Docs
</a></div><div class="nav-item"><a href="/our_journey/" class="nav-link">
  Our Journey
</a></div><div class="nav-item"><a href="https://d2b9ybaeuz42aa.cloudfront.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dashboard
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/journal/" class="nav-link">
  Journal
</a></div><div class="nav-item"><a href="/tray-inout/" class="nav-link">
  Tray In/Out Docs
</a></div><div class="nav-item"><a href="/tablevision/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Tablevision Docs
</a></div><div class="nav-item"><a href="/our_journey/" class="nav-link">
  Our Journey
</a></div><div class="nav-item"><a href="https://d2b9ybaeuz42aa.cloudfront.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dashboard
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Tablevision Docs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tablevision/" aria-current="page" class="active sidebar-link">How to use Tablevision</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tablevision/#apis-used" class="sidebar-link">APIs used</a></li><li class="sidebar-sub-header"><a href="/tablevision/#tablevision-device-environments" class="sidebar-link">Tablevision device environments</a></li><li class="sidebar-sub-header"><a href="/tablevision/#instructions" class="sidebar-link">Instructions</a></li></ul></li><li><a href="/tablevision/documentation.html" class="sidebar-link">Tablevision Code Documentation</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="how-to-use-tablevision"><a href="#how-to-use-tablevision" class="header-anchor">#</a> How to use Tablevision</h1> <div class="custom-block tip"><p class="custom-block-title">Hello there!</p> <p>Check out our <a href="https://github.com/smu-iot20-g7/tablevision" target="_blank" rel="noopener noreferrer">Github Repository<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to see our source codes or read our journal <a href="/journal/tablevision.html">here</a>.</p></div> <h1 id="tablevision"><a href="#tablevision" class="header-anchor">#</a> Tablevision</h1> <p>Monitor table occupancy status at Beo Crescent Hawker Centre based on crockeries/receptacles left on tables and patron occupancy.</p> <h2 id="apis-used"><a href="#apis-used" class="header-anchor">#</a> APIs used</h2> <p><strong><em>Tablevision v1 [deprecated]</em></strong>: <a href="https://www.clarifai.com" target="_blank" rel="noopener noreferrer">Clarifai<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong><em>Tablevision v2</em></strong>: <a href="https://cloud.google.com/vision/automl/docs/tutorial" target="_blank" rel="noopener noreferrer">Google Cloud AutoML Vision<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="tablevision-device-environments"><a href="#tablevision-device-environments" class="header-anchor">#</a> Tablevision device environments</h2> <blockquote><p>There are three environments to run Tablevision:</p> <p><strong>&quot;IoT&quot;</strong>: Raspberry Pi</p> <p><strong>&quot;Initialiser&quot;</strong>: Device with GUI (laptop or Pi connected to screen)</p> <p><strong>&quot;Processer&quot;</strong>: Logic-processing endpoint</p></blockquote> <hr> <ul><li><p><strong>Raspberry Pi – <code>_sender</code></strong>: <em>To capture the image from the Raspberry Pi's main camera and send it to our API endpoint, <code>tablevision_processer</code>.</em></p></li> <li><p><strong>Local device (Our macOS) – <code>_initialiser</code></strong>: <em>To map out each table from an image using a GUI. Can be run on Raspberry Pi as well, if a GUI is enabled and a screen is connected on the Pi.</em></p></li> <li><p><strong>API Endpoint on the Cloud (Our EC2) – <code>_processer</code></strong>: <em>Endpoint for Raspberry Pi to send image to and processes each frame and sends it to the Google Cloud AutoML API with our custom Tablevision model. Receives the object prediction results and processes the logic by updating our NoSQL database.</em></p></li></ul> <h2 id="instructions"><a href="#instructions" class="header-anchor">#</a> Instructions</h2> <ol><li>Check that the EC2 instance is running (<code>processer</code> is deployed here)</li> <li>On the Pi, capture a still image using <code>raspistill -o initialise.jpg</code></li> <li>Transfer <code>initialise.jpg</code> to your local device. <strong><em>Skip this step if Pi is connected to a monitor and GUI is enabled.</em></strong></li> <li>In the <code>tablevision_initialiser</code> folder, specify your image name in the <code>imagecrop.py</code> file.</li> <li>Get coordinates of tables using <code>imagecrop.py</code>.</li> <li>In the same folder, run <code>initialise.py</code> and use the parameters provided by <code>imagecrop.py</code> in the sysargs. See example below.</li> <li>Ensure <code>tablevision_sender/tablevision.py</code> is running on the Raspberry Pi.</li></ol> <p><em>Step 6 example:</em></p> <div class="language- extra-class"><pre class="language-text"><code>python3 initialise.py '{&quot;46&quot;: [[0.03948170731707307, 0.09692911255411243], [0.4337906504065041, 0.09692911255411243], [0.03948170731707307, 0.4648944805194804], [0.4337906504065041, 0.4648944805194804]]}'
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/tablevision/documentation.html">
        Tablevision Code Documentation
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f1897de2.js" defer></script><script src="/assets/js/2.442eaabe.js" defer></script><script src="/assets/js/10.b2fb73e1.js" defer></script>
  </body>
</html>
