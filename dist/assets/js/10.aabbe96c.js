(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{412:function(e,t,o){"use strict";o.r(t);var i=o(42),s=Object(i.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"how-to-use-tablevision"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#how-to-use-tablevision"}},[e._v("#")]),e._v(" How to use Tablevision")]),e._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("Hello there!")]),e._v(" "),o("p",[e._v("Check out our "),o("a",{attrs:{href:"https://github.com/smu-iot20-g7/tablevision",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github Repository"),o("OutboundLink")],1),e._v(" to see our source codes or read our journal "),o("RouterLink",{attrs:{to:"/journal/tablevision.html"}},[e._v("here")]),e._v(".")],1)]),e._v(" "),o("h1",{attrs:{id:"tablevision"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#tablevision"}},[e._v("#")]),e._v(" Tablevision")]),e._v(" "),o("p",[e._v("Monitor table occupancy status at Beo Crescent Hawker Centre based on crockeries/receptacles left on tables and patron occupancy.")]),e._v(" "),o("h2",{attrs:{id:"apis-used"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#apis-used"}},[e._v("#")]),e._v(" APIs used")]),e._v(" "),o("p",[o("strong",[o("em",[e._v("Tablevision v1 [deprecated]")])]),e._v(": "),o("a",{attrs:{href:"https://www.clarifai.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Clarifai"),o("OutboundLink")],1)]),e._v(" "),o("p",[o("strong",[o("em",[e._v("Tablevision v2")])]),e._v(": "),o("a",{attrs:{href:"https://cloud.google.com/vision/automl/docs/tutorial",target:"_blank",rel:"noopener noreferrer"}},[e._v("Google Cloud AutoML Vision"),o("OutboundLink")],1)]),e._v(" "),o("h2",{attrs:{id:"tablevision-device-environments"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#tablevision-device-environments"}},[e._v("#")]),e._v(" Tablevision device environments")]),e._v(" "),o("blockquote",[o("p",[e._v("There are three environments to run Tablevision:")]),e._v(" "),o("p",[o("strong",[e._v('"IoT"')]),e._v(": Raspberry Pi")]),e._v(" "),o("p",[o("strong",[e._v('"Initialiser"')]),e._v(": Device with GUI (laptop or Pi connected to screen)")]),e._v(" "),o("p",[o("strong",[e._v('"Processer"')]),e._v(": Logic-processing endpoint")])]),e._v(" "),o("hr"),e._v(" "),o("ul",[o("li",[o("p",[o("strong",[e._v("Raspberry Pi – "),o("code",[e._v("_sender")])]),e._v(": "),o("em",[e._v("To capture the image from the Raspberry Pi's main camera and send it to our API endpoint, "),o("code",[e._v("tablevision_processer")]),e._v(".")])])]),e._v(" "),o("li",[o("p",[o("strong",[e._v("Local device (Our macOS) – "),o("code",[e._v("_initialiser")])]),e._v(": "),o("em",[e._v("To map out each table from an image using a GUI. Can be run on Raspberry Pi as well, if a GUI is enabled and a screen is connected on the Pi.")])])]),e._v(" "),o("li",[o("p",[o("strong",[e._v("API Endpoint on the Cloud (Our EC2) – "),o("code",[e._v("_processer")])]),e._v(": "),o("em",[e._v("Endpoint for Raspberry Pi to send image to and processes each frame and sends it to the Google Cloud AutoML API with our custom Tablevision model. Receives the object prediction results and processes the logic by updating our NoSQL database.")])])])]),e._v(" "),o("h2",{attrs:{id:"instructions"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#instructions"}},[e._v("#")]),e._v(" Instructions")]),e._v(" "),o("ol",[o("li",[e._v("Check that the EC2 instance is running ("),o("code",[e._v("processer")]),e._v(" is deployed here)")]),e._v(" "),o("li",[e._v("On the Pi, capture a still image using "),o("code",[e._v("raspistill -o initialise.jpg")])]),e._v(" "),o("li",[e._v("Transfer "),o("code",[e._v("initialise.jpg")]),e._v(" to your local device. "),o("strong",[o("em",[e._v("Skip this step if Pi is connected to a monitor and GUI is enabled.")])])]),e._v(" "),o("li",[e._v("In the "),o("code",[e._v("tablevision_initialiser")]),e._v(" folder, specify your image name in the "),o("code",[e._v("imagecrop.py")]),e._v(" file.")]),e._v(" "),o("li",[e._v("Get coordinates of tables using "),o("code",[e._v("imagecrop.py")]),e._v(".")]),e._v(" "),o("li",[e._v("In the same folder, run "),o("code",[e._v("initialise.py")]),e._v(" and use the parameters provided by "),o("code",[e._v("imagecrop.py")]),e._v(" in the sysargs. See example below.")]),e._v(" "),o("li",[e._v("Ensure "),o("code",[e._v("tablevision_sender/tablevision.py")]),e._v(" is running on the Raspberry Pi.")])]),e._v(" "),o("p",[o("em",[e._v("Step 6 example:")])]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("python3 initialise.py '{\"46\": [[0.03948170731707307, 0.09692911255411243], [0.4337906504065041, 0.09692911255411243], [0.03948170731707307, 0.4648944805194804], [0.4337906504065041, 0.4648944805194804]]}'\n")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);